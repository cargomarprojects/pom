<ngb-tabset>
  <ngb-tab title="Order List">
    <ng-template ngbTabContent>
      <div class="page-header">
        <div class="col">
          <!-- <label>{{title}}</label> -->
          <button [disabled]="loading" (click)="ActionHandler('LIST','')" class="btn btn-primary btn-sm">List</button>
          <button [disabled]="loading" (click)="ActionHandler('ADD','')" class="btn btn-primary btn-sm">New</button>
          <button *ngIf="bAdmin" [disabled]="loading" (click)="DeleteRecord()"
            class="btn btn-primary btn-sm">Delete</button>
          <button class="btn btn-primary btn-sm" (click)="Close()">Close</button>
        </div>
      </div>


      <div class="page-list">
        
        <app-orderlist-header [_query]="searchQuery$ | async" (searchEvents)="searchEvents($event)" ></app-orderlist-header>
        
        <App-Page [_pageQuery]="pageQuery$ | async" (pageEvents)="pageEvents($event)"></App-Page>
        
        <div class="page-body table-responsive">

          <table class="table  table-hover table-sm">
            <thead class="page-body-thead">
              <tr>
                <th><input type="checkbox" [(ngModel)]="selectcheck" (click)="SelectCheckbox()"></th>
                <th>REF#</th>
                <th>AGENT</th>
                <th>SHIPPER</th>
                <th>CONSIGNEE</th>
                <th>PO.ID</th>
                <th>PO#</th>
                <th>STYLE</th>
                <th>COLOR</th>
                <th>EDI</th>
                <th>OUR.BK#</th>
                <th>AGENT.BK#</th>
                <th>ORD.SELECTED</th>
                <th>PLANNING#</th>
                <th>WEEK#</th>
                <th>JOB#</th>
                <th>STATUS</th>
                <th class="text-right">PKGS</th>
                <th class="text-right">PCS</th>
                <th class="text-right">NTWT</th>
                <th class="text-right">GRWT</th>
                <th class="text-right">CBM</th>
                <th>DESCRIPTION</th>
                <th>UNECO</th>
                <th>HS.CODE</th>
                <th>INVOICE#</th>
                <th>POL</th>
                <th>POD</th>
                <th>CARGO.STATUS</th>
                <th>TRACK.STATUS</th>
                <th>CREATED</th>
                <th>WINDOW1</th>
                <th>WINDOW2</th>
                <th>INSTOCK1</th>
                <th>INSTOCK2</th>
                <!-- <th>CONTRACT#</th> -->
              </tr>
            </thead>
            <tbody class="page-body-tbody" *ngFor="let rec of RecordList">
              <tr>
                <td><input type="checkbox" [(ngModel)]="rec.ord_selected"></td>
                <td>{{rec.ord_agentref_id}}</td>
                <td (click)="ActionHandler('EDIT',rec.ord_pkid)">{{rec.ord_agent_name}}</td>
                <td (click)="ActionHandler('EDIT',rec.ord_pkid)">{{rec.ord_exp_name}}</td>
                <td>{{rec.ord_imp_name}}</td>
                <td>{{rec.ord_uid}}</td>
                <td>{{rec.ord_po}}</td>
                <td>{{rec.ord_style}}</td>
                <td>{{rec.ord_color}}</td>
                <td>{{rec.ord_ftp_status}}</td>
                <td>{{rec.ord_ourbooking_no}}</td>
                <td>{{rec.ord_booking_no}}</td>
                <td>{{rec.ord_approved ? 'YES' : 'NO'}}</td>
                <td>{{rec.ord_plan_no}}</td>
                <td>{{rec.ord_week_no}}</td>
                <td>{{rec.job_docno}}</td>
                <td>{{rec.ord_status}}</td>
                <td align='right'>{{rec.ord_pkg | number : '1.2-2'}}</td>
                <td align='right'>{{rec.ord_pcs | number : '1.2-2'}}</td>
                <td align='right'>{{rec.ord_ntwt | number : '1.3-3'}}</td>
                <td align='right'>{{rec.ord_grwt | number : '1.3-3'}}</td>
                <td align='right'>{{rec.ord_cbm | number : '1.3-3'}}</td>
                <td height="5">{{rec.ord_desc}}</td>
                <td>{{rec.ord_uneco}}</td>
                <td>{{rec.ord_hs_code}}</td>
                <td>{{rec.ord_invno}}</td>
                <td>{{rec.ord_pol}}</td>
                <td>{{rec.ord_pod}}</td>
                <td>{{rec.ord_cargo_status}}</td>
                <td>{{rec.ord_track_status}}</td>
                <td>{{rec.rec_created_dte}}</td>
                <td>{{rec.ord_window1}}</td>
                <td>{{rec.ord_window2}}</td>
                <td>{{rec.ord_instock1}}</td>
                <td>{{rec.ord_instock2}}</td>
                <!-- <td>{{rec.ord_contractno}}</td> -->
              </tr>
            </tbody>
          </table>
        </div>

        <App-Page [_pageQuery]="pageQuery$ | async" (pageEvents)="pageEvents($event)"></App-Page>


      </div>

      
      <ng-template #trackorder let-c="close" let-d="dismiss">
        <div class="modal-header">
          <h4 class="modal-title">Tracking</h4>
          <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <app-trackorder [pkid]="ord_trkids" [refno]="ord_trkpos" [type]="'ORDLIST'"></app-trackorder>
        </div>
      </ng-template>

      <ng-template #approvedorder let-c="close" let-d="dismiss">
        <div class="modal-header">
          <h4 class="modal-title">Approved Order List</h4>
          <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <app-ediorder [type]="type" [menuid]="menuid"></app-ediorder>
        </div>
      </ng-template>

      <ng-template #ftpsent let-c="close" let-d="dismiss">
        <div class="modal-header">
          <h4 class="modal-title">Message Details</h4>
          <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <app-mail [pkid]="pkid" [canftp]=true [type]="ftpTransfertype" [sHtml]="''" [defaultmessage]="''"
            [agentname]="ftp_agent_name" [agentcode]="ftp_agent_code" [defaultsubject]="sSubject" [updateto_ids]=true
            [FtpAttachList]="AttachList" [updatesql]="ftpUpdtSql" [rootpage]="'FTPPAGE'">
          </app-mail>
        </div>
      </ng-template>
      <ng-template #history let-c="close" let-d="dismiss">
        <div class="modal-header">
          <h4 class="modal-title">History</h4>
          <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <app-ftpreport [type]="ftpTransfertype" [pkid]="pkid"></app-ftpreport>
        </div>
      </ng-template>
    </ng-template>
  </ngb-tab>
  <ngb-tab title="Approved List">
    <ng-template ngbTabContent>
      <app-ediorder [type]="" [menuid]="APPROVEDORDERS"></app-ediorder>
    </ng-template>
  </ngb-tab>
</ngb-tabset>